## I2C
### 简介
IC2是指集成电路总线，是半全工串行总线协议，通过两根线实现多设备互联。

### 协议内容
#### 物理层
核心总线
- 时钟线SCL：由主控设备产生时序，所有设备同步
- 数据线SDA：双向传输，但一次只能从一个方向传输。主控和从机下拉SDA则输出低电平，释放SDA则呈现高电平，一次只有一个设备能够下拉电阻。

辅助设计：SCL和SDA都要外接上拉电阻，空闲时保持高电平。  
接线规则：所有设备引脚并联在总线上，GND接地，VCC按需供电  

#### 协议层
设备分类：
- 主控：主控决定总线时钟线频率，从机同步于主控。
- 从机：响应主机指令，每个从机都有自己唯一的地址。  
  设备地址：7bit/10bit
  
指令：  
- start：SCL高电平时，SDA拉低  
- stop：SCL高电平时，SDA拉高 
- ACK：第九个SCL周期，拉低SDA---告诉发送方数据已发送成功
- NACK：第九个SCL周期，SDA保持高电平---告诉发送方数据接收失败/无数据可发  
- 选择从机：地址+（1读 0写）

数据传输逻辑：  
1. 主控先拉低SDA总线，从机进入等待状态，准备接受指令。---SCL高电平 SDA低电平  
2. 主控拉低SCL总线，设置SDA。---SCL低电平 SDA设置数据
3. 主控拉高SCL总线，从机锁存SDA ---SCL高电平 SDA锁存
4. 一个时钟线周期结束 完成一位数据传输
5. 第九个周期开始时SCL高电平，主机释放SDA，上拉电阻拉高，从机将SDA拉低/保持高电位表示ADK/NADK。






